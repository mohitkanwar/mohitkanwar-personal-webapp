"use strict";(self.webpackChunkang2_mohitkanwar=self.webpackChunkang2_mohitkanwar||[]).push([[37],{9037:function(t,e,r){r.r(e),r.d(e,{EditorModule:function(){return Z}});var i=r(3216),s=r(8002),o=r(5304),a=r(8720),n=r(7399);let c=(()=>{class t{constructor(t,e,r){this.articlesService=t,this.router=e,this.userService=r}resolve(t,e){return this.articlesService.get(t.params.slug).pipe((0,s.U)(t=>{if(this.userService.getCurrentUser().username===t.author.username)return t;this.router.navigateByUrl("/")}),(0,o.K)(t=>this.router.navigateByUrl("/")))}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(i.JU),a.LFG(n.F0),a.LFG(i.KD))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})();var l=r(6345),u=r(665),g=r(6860),p=r(8583);function h(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"span",15),a.TgZ(1,"i",16),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().removeTag(e)}),a.qZA(),a._uU(2),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(2),a.hij(" ",t," ")}}let d=(()=>{class t{constructor(t,e,r,i){this.articlesService=t,this.route=e,this.router=r,this.fb=i,this.article={},this.tagField=new u.NI,this.errors={},this.isSubmitting=!1,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(t=>{t.article&&(this.article=t.article,this.articleForm.patchValue(t.article))})}addTag(){const t=this.tagField.value;this.article.tagList.indexOf(t)<0&&this.article.tagList.push(t),this.tagField.reset("")}removeTag(t){this.article.tagList=this.article.tagList.filter(e=>e!==t)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(t=>this.router.navigateByUrl("/article/"+t.slug),t=>{this.errors=t,this.isSubmitting=!1})}updateArticle(t){Object.assign(this.article,t)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(i.JU),a.Y36(n.gz),a.Y36(n.F0),a.Y36(u.qu))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-editor-page"]],decls:20,vars:5,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a._UZ(4,"app-list-errors",4),a.TgZ(5,"form",5),a.TgZ(6,"fieldset",6),a.TgZ(7,"fieldset",7),a._UZ(8,"input",8),a.qZA(),a.TgZ(9,"fieldset",7),a._UZ(10,"input",9),a.qZA(),a.TgZ(11,"fieldset",7),a.TgZ(12,"textarea",10),a._uU(13,"              "),a.qZA(),a.qZA(),a.TgZ(14,"fieldset",7),a.TgZ(15,"input",11),a.NdJ("keyup.enter",function(){return e.addTag()}),a.qZA(),a.TgZ(16,"div",12),a.YNc(17,h,3,1,"span",13),a.qZA(),a.qZA(),a.TgZ(18,"button",14),a.NdJ("click",function(){return e.submitForm()}),a._uU(19," Publish Article "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("errors",e.errors),a.xp6(1),a.Q6J("formGroup",e.articleForm),a.xp6(1),a.Q6J("disabled",e.isSubmitting),a.xp6(9),a.Q6J("formControl",e.tagField),a.xp6(2),a.Q6J("ngForOf",e.article.tagList))},directives:[g.S,u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,u.oH,p.sg],encapsulation:2}),t})();const f=[{path:"",component:d,canActivate:[i.a1]},{path:":slug",component:d,canActivate:[i.a1],resolve:{article:c}}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.Bz.forChild(f)],n.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[c],imports:[[l.m8,m]]}),t})()}}]);